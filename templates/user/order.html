{% extends 'user/base.html' %}
{% load humanize %}

{% block content %}
{% include 'user/nav.html' %}
<hr style="border :2px solid  #174376;">
<div class="container mt-5">
    <!-- Orders Page Title -->
<h2 style="
    font-family: 'Arial', 'Helvetica', sans-serif; 
    font-weight: 700; 
    font-size: 2rem; 
    color: #174376; 
    margin-bottom: 0.3rem;
    line-height: 1.2;
">
    Orders ðŸ“¦ For  {{ request.user.first_name }} {{ request.user.last_name }}
</h2>
<p style="
    font-family: 'Arial', 'Helvetica', sans-serif; 
    font-size: 1rem; 
    color: #555; 
    margin-bottom: 1.5rem;
">
    Hereâ€™s a list of all your completed and ongoing orders. You can track, view details, or manage your purchases easily.
</p>


    {% if orders %}
    <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover" style="min-width: 800px;">
            <thead>
                <tr>
                    <th style="white-space: nowrap;">Order ID</th>
                    <th style="white-space: nowrap;">Product</th>
                    <th style="white-space: nowrap;">Quantity</th>
                    <th style="white-space: nowrap;">Total Cost</th>
                    <th style="white-space: nowrap;">Status</th>
                    <th style="white-space: nowrap;">Order Date</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr>
                    <td style="white-space: nowrap;">A-{{ order.id|stringformat:"04d" }}</td>
                    <td style="white-space: nowrap;">{{ order.product.name }}</td>
                    <td style="white-space: nowrap;">{{ order.quantity|intcomma }}</td>
                    <td style="white-space: nowrap;">{{ order.total_cost|floatformat:2|intcomma }} TZS</td>
                    <td style="white-space: nowrap;">
                        {% if order.status == 'accepted' %}
                            <span class="badge badge-success">{{ order.get_status_display }}</span>
                        {% elif order.status == 'packed' %}
                            <span class="badge badge-info">{{ order.get_status_display }}</span>
                        {% elif order.status == 'on_the_way' %}
                            <span class="badge badge-warning">{{ order.get_status_display }}</span>
                        {% elif order.status == 'delivered' %}
                            <span class="badge badge-primary">{{ order.get_status_display }}</span>
                        {% elif order.status == 'cancel' %}
                            <span class="badge badge-danger">{{ order.get_status_display }}</span>
                        {% else %}
                            <span class="badge badge-secondary">{{ order.get_status_display }}</span>
                        {% endif %}
                    </td>
                    <td style="white-space: nowrap;">{{ order.order_date|date:"D, d M Y H:i" }}</td>
                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th colspan="3" class="text-right" style="white-space: nowrap;">Total Cost Orders</th>
                    <th style="white-space: nowrap;">{{ total_cost|floatformat:2|intcomma }} TZS</th>
                    <th colspan="2"></th>
                </tr>
            </tfoot>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info">
        You have not placed any orders yet.
    </div>
    {% endif %}
</div>
{% endblock %}
